# 🚀 GitHub推送前检查清单

## ✅ 必做项

### 1. 准备图标文件
```bash
# 在 build/ 目录放置以下文件:
build/
├── icon.ico        # Windows图标 (256x256)
├── icon.icns       # macOS图标 (512x512)  
├── icon.png        # Linux图标 (512x512)
└── icons/          # Linux多尺寸图标
```

**如何生成**:
```bash
# 使用generate_icons.py
pip install Pillow
python generate_icons.py 你的512x512图标.png

# 然后使用在线工具转换为.ico和.icns:
# https://cloudconvert.com/png-to-ico
# https://cloudconvert.com/png-to-icns
```

### 2. 更新package.json
```json
{
  "name": "logistics-video-recorder",  // 你的项目名
  "version": "2.0.0",                   // 版本号
  "author": "你的名字",                  // 作者
  "repository": {
    "url": "https://github.com/你的用户名/你的仓库名.git"
  }
}
```

### 3. 测试Web服务器
```bash
# 确保Web端正常运行
./start_web.sh

# 访问 http://localhost:8000 测试
# 检查:
- [ ] 页面加载正常
- [ ] 统计数据显示
- [ ] 视频列表加载  
- [ ] PWA安装提示出现
```

### 4. 创建GitHub仓库
```bash
# 如果还没有创建，在GitHub创建新仓库:
# 仓库名: logistics-video-recorder (或你喜欢的名字)
# 可见性: Public 或 Private
# 不要勾选: Initialize with README (我们已经有了)
```

### 5. 配置Git
```bash
# 初始化Git (如果还没有)
git init

# 添加远程仓库
git remote add origin https://github.com/你的用户名/你的仓库名.git

# 配置用户信息
git config user.name "你的名字"
git config user.email "你的邮箱"
```

---

## 📤 推送流程

### 第一次推送

```bash
# 1. 添加所有文件
git add .

# 2. 创建初始提交
git commit -m "feat: 物流视频录制管理系统v2.0初始版本

- ✅ 桌面应用(PyQt6)
- ✅ Web管理界面(FastAPI)
- ✅ PWA移动端支持
- ✅ Electron跨平台打包配置
- ✅ GitHub Actions自动构建"

# 3. 推送到主分支
git branch -M main
git push -u origin main
```

### 触发自动构建

```bash
# 创建版本标签
git tag -a v2.0.0 -m "Release v2.0.0

新功能:
- 视频录制和管理
- 数据可视化仪表板
- PWA移动端App
- 跨平台桌面应用
"

# 推送标签（触发GitHub Actions）
git push origin v2.0.0
```

---

## ⏱️ 构建等待

推送标签后:

1. **进入GitHub仓库** → Actions标签
2. **查看构建进度** (约20-30分钟)
   - build-windows (~5-8分钟)
   - build-macos (~8-12分钟)
   - build-linux (~5-8分钟)
   - release (创建发布)

3. **构建完成后** → Releases标签
   - 查看自动创建的Release
   - 下载各平台安装包测试

---

## 🧪 本地测试 (可选)

在推送前，可以本地测试Electron:

```bash
# 安装依赖
npm install

# 启动Electron开发版
npm start

# 测试打包 (不生成安装包，快速)
npm run pack
```

---

## 📋 推送后检查

### GitHub仓库检查
- [ ] README.md正确显示
- [ ] 文件结构完整
- [ ] .gitignore生效 (node_modules、dist等未上传)

### GitHub Actions检查
- [ ] Workflow文件识别成功
- [ ] 三个构建任务都在运行
- [ ] 没有明显错误

### Release检查 (构建完成后)
- [ ] Release自动创建
- [ ] Windows安装包存在
- [ ] macOS安装包存在
- [ ] Linux安装包存在
- [ ] 所有文件都可下载

---

## 🐛 常见问题预防

### 1. 缺少图标文件
**症状**: 构建失败，提示找不到icon.ico等

**解决**:
```bash
# 确保build目录有图标
ls -la build/
# 应该看到: icon.ico, icon.icns, icon.png
```

### 2. Python依赖问题
**症状**: Electron启动时Python服务器启动失败

**解决**:
```bash
# 确保requirements-web.txt完整
pip install -r requirements-web.txt
# 测试Python服务器
python web_server.py
```

### 3. NPM依赖问题
**症状**: npm install失败或构建失败

**解决**:
```bash
# 删除缓存重装
rm -rf node_modules package-lock.json
npm install
```

### 4. Git推送失败
**症状**: git push被拒绝

**解决**:
```bash
# 检查远程仓库地址
git remote -v

# 重新设置
git remote set-url origin https://github.com/你的用户名/你的仓库名.git

# 强制推送 (仅首次，谨慎使用)
git push -f origin main
```

---

## 🎯 推送顺序

**正确的顺序**:

1. ✅ 准备图标文件
2. ✅ 更新package.json
3. ✅ 本地测试Web端
4. ✅ 创建GitHub仓库
5. ✅ 配置Git远程
6. ✅ 提交所有代码 (main分支)
7. ✅ 推送主分支
8. ✅ 创建版本标签
9. ✅ 推送标签
10. ✅ 等待自动构建
11. ✅ 测试安装包

---

## 📝 提交信息规范

使用约定式提交 (Conventional Commits):

```bash
# 新功能
git commit -m "feat: 添加用户认证功能"

# 修复bug
git commit -m "fix: 修复视频播放卡顿问题"

# 文档更新
git commit -m "docs: 更新安装指南"

# 样式调整
git commit -m "style: 优化按钮颜色"

# 重构代码
git commit -m "refactor: 重构API接口"

# 性能优化
git commit -m "perf: 优化视频加载速度"

# 测试相关
git commit -m "test: 添加单元测试"

# 构建相关
git commit -m "build: 更新Electron版本"

# CI/CD相关
git commit -m "ci: 优化GitHub Actions配置"
```

---

## ✨ 推送成功后

恭喜！你的项目已经推送到GitHub并开始自动构建！

**接下来可以**:

1. **监控构建** - GitHub → Actions查看进度
2. **准备宣传** - 编写项目介绍
3. **测试安装包** - Release页面下载测试
4. **收集反馈** - 邀请用户试用
5. **持续改进** - 根据反馈迭代

---

## 🎉 完成标志

当你看到以下内容时，说明成功了：

- ✅ GitHub仓库代码已推送
- ✅ Actions显示绿色✓（所有任务成功）
- ✅ Releases页面有v2.0.0版本
- ✅ 所有平台安装包都可下载
- ✅ 下载的安装包可以正常运行

---

**祝你推送顺利！🚀**

如有问题，查看 `打包部署指南.md` 获取更多帮助。
