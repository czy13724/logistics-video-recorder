# 物流视频录制系统 - Web端快速使用指南

## 🚀 快速开始

### Mac / Linux 系统

1. **一键启动**
   ```bash
   ./start_web.sh
   ```

2. **首次运行**
   - 脚本会自动创建虚拟环境
   - 自动安装所需依赖包
   - 启动Web服务器

3. **访问系统**
   - 打开浏览器访问: http://localhost:8000

### Windows 系统

1. **双击运行** `start_web.bat`

2. **或通过命令行**
   ```cmd
   start_web.bat
   ```

3. **访问系统**
   - 打开浏览器访问: http://localhost:8000

---

## 📱 功能使用

### 1. 数据概览仪表板

启动后默认显示的主页：
- ✅ 查看总视频数量、今日录制数、问题统计
- ✅ 查看存储空间占用情况
- ✅ 7天录制趋势图表
- ✅ 问题类型分布饼图

### 2. 视频管理

点击左侧"🎥 视频管理"菜单：

**浏览视频**
- 以卡片形式展示所有录制的视频
- 显示快递单号、录制时间、文件大小
- 显示问题标记（如有）

**搜索视频**
- 在顶部搜索框输入快递单号
- 点击搜索按钮或按回车键

**筛选视频**
- 选择开始日期和结束日期
- 选择问题筛选条件（全部/仅有问题/无问题）
- 点击"筛选"按钮

**播放和编辑视频**
1. 点击任意视频卡片
2. 弹出窗口中可以：
   - 播放视频
   - 查看/编辑问题标记
   - 添加/修改备注信息
   - 保存更改
   - 删除视频（谨慎操作）

### 3. 导出文件管理

点击左侧"📥 导出文件"菜单：
- 查看所有导出的CSV和PDF文件
- 显示文件名称、大小、创建时间
- 点击下载按钮获取文件

---

## 🔧 高级配置

### 自定义端口

如果8000端口被占用，可以指定其他端口：

**Mac / Linux**
```bash
./start_web.sh --port 8080
```

**Windows**
```cmd
start_web.bat --port 8080
```

### 局域网访问

允许局域网内其他设备访问：

**Mac / Linux**
```bash
./start_web.sh --host 0.0.0.0
```

**Windows**
```cmd
start_web.bat --host 0.0.0.0
```

然后在其他设备浏览器访问: `http://你的电脑IP:8000`

### 开发模式（热重载）

修改代码后自动重启服务器：

```bash
./start_web.sh --reload
```

---

## 📖 API文档

系统提供完整的RESTful API，可访问自动生成的交互式文档：

**Swagger UI**: http://localhost:8000/docs

主要API端点：

| 方法 | 路径 | 说明 |
|------|------|------|
| GET | `/api/videos` | 获取视频列表 |
| GET | `/api/videos/{tracking_number}/stream` | 流式播放视频 |
| PUT | `/api/videos/{tracking_number}/problems` | 更新问题标记 |
| DELETE | `/api/videos/{tracking_number}` | 删除视频 |
| GET | `/api/stats` | 获取统计数据 |
| GET | `/api/exports` | 获取导出文件列表 |
| GET | `/api/exports/{filename}` | 下载导出文件 |

---

## ❓ 常见问题

### Q1: 如何停止服务器？

**答**: 在运行服务器的终端窗口按 `Ctrl + C`

### Q2: 视频无法播放？

**答**: 
- 确认视频文件在 `videos/` 目录下
- 检查浏览器是否支持MP4格式
- 尝试刷新页面

### Q3: 修改了备注但没有保存？

**答**: 编辑后必须点击"保存"按钮才能保存更改

### Q4: 如何在手机上访问？

**答**: 
1. 确保手机和电脑在同一Wi-Fi网络
2. 使用 `--host 0.0.0.0` 启动服务器
3. 在手机浏览器访问: `http://电脑IP:8000`
4. 可以在电脑终端运行 `ifconfig` (Mac/Linux) 或 `ipconfig` (Windows) 查看IP地址

### Q5: 端口8000被占用怎么办？

**答**: 使用 `--port` 参数指定其他端口，例如 `--port 8080`

### Q6: 如何卸载/重置虚拟环境？

**答**: 删除 `venv` 文件夹，再次运行启动脚本会自动重新创建

---

## 🎨 界面功能说明

### 侧边栏
- **Logo区域**: 显示系统标题
- **导航菜单**: 切换不同功能页面
- **存储信息**: 实时显示存储空间占用

### 顶部栏
- **搜索框**: 快速搜索快递单号
- **当前时间**: 显示系统时间
- **刷新按钮**: 刷新当前页面数据

### 统计卡片
- 鼠标悬停时会有上浮动画
- 显示关键统计指标

### 视频卡片
- 点击卡片播放视频
- 悬停显示播放图标
- 红色标签表示有问题标记

---

## 💡 使用技巧

1. **快速搜索**: 在搜索框输入后直接按回车键
2. **批量查看**: 使用日期筛选快速定位特定时期的视频
3. **问题管理**: 定期检查"仅有问题"的视频进行处理
4. **存储管理**: 关注侧边栏的存储空间提示，及时清理过期视频
5. **数据导出**: 定期在桌面应用中导出CSV和PDF备份

---

## 🔐 安全提示

1. **局域网部署**: 仅在可信网络中允许外部访问
2. **备份数据**: 定期备份 `videos/` 目录
3. **删除操作**: 删除视频前请确认，操作不可恢复

---

## 📞 技术支持

如有问题，请查阅：
- README.md - 完整使用文档
- http://localhost:8000/docs - API文档

祝使用愉快！ 🎉
