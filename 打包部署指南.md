# ğŸ“¦ è‡ªåŠ¨æ‰“åŒ…éƒ¨ç½²æŒ‡å—

## ğŸ¯ æ¦‚è¿°

æœ¬é¡¹ç›®å·²é…ç½®GitHub Actionsè‡ªåŠ¨åŒ–å·¥ä½œæµï¼Œæ¨é€ä»£ç åä¼šè‡ªåŠ¨æ„å»ºä»¥ä¸‹å¹³å°çš„å®‰è£…åŒ…ï¼š

- âœ… **Windows** - .exeå®‰è£…åŒ… + ä¾¿æºç‰ˆ
- âœ… **macOS** - .dmgå®‰è£…åŒ… + .zipå‹ç¼©åŒ… (æ”¯æŒIntelå’ŒApple Silicon)
- âœ… **Linux** - .AppImage + .deb + .rpmåŒ…

---

## ğŸš€ è‡ªåŠ¨æ‰“åŒ…æµç¨‹

### æ–¹å¼ä¸€ï¼šTagè§¦å‘ï¼ˆæ¨èï¼‰

åˆ›å»ºç‰ˆæœ¬æ ‡ç­¾å³å¯è‡ªåŠ¨æ„å»ºå’Œå‘å¸ƒï¼š

```bash
# 1. æäº¤ä»£ç 
git add .
git commit -m "å‡†å¤‡å‘å¸ƒv2.0.0"

# 2. åˆ›å»ºæ ‡ç­¾
git tag v2.0.0

# 3. æ¨é€æ ‡ç­¾
git push origin v2.0.0
```

GitHub Actionsä¼šè‡ªåŠ¨ï¼š
1. âœ… åœ¨Windows/Mac/Linuxä¸‰ä¸ªç³»ç»Ÿä¸Šæ„å»º
2. âœ… æ‰“åŒ…æˆå„å¹³å°å®‰è£…åŒ…
3. âœ… è‡ªåŠ¨åˆ›å»ºGitHub Release
4. âœ… ä¸Šä¼ æ‰€æœ‰å®‰è£…åŒ…åˆ°Release

### æ–¹å¼äºŒï¼šæ‰‹åŠ¨è§¦å‘

1. è¿›å…¥GitHubä»“åº“
2. ç‚¹å‡» **Actions** æ ‡ç­¾
3. é€‰æ‹© **Build and Release** å·¥ä½œæµ
4. ç‚¹å‡» **Run workflow**
5. é€‰æ‹©åˆ†æ”¯ï¼Œç‚¹å‡»è¿è¡Œ

æ„å»ºå®Œæˆåï¼Œå®‰è£…åŒ…ä¼šä¿å­˜åœ¨Artifactsä¸­ï¼ˆä¿ç•™30å¤©ï¼‰

---

## ğŸ“‹ å‡†å¤‡å·¥ä½œ

### 1. å‡†å¤‡å›¾æ ‡æ–‡ä»¶

åœ¨ `build/` ç›®å½•ä¸‹æ”¾ç½®ä»¥ä¸‹å›¾æ ‡ï¼š

```
build/
â”œâ”€â”€ icon.ico        # Windowså›¾æ ‡ (256x256)
â”œâ”€â”€ icon.icns       # macOSå›¾æ ‡ (512x512)
â”œâ”€â”€ icon.png        # Linuxå›¾æ ‡ (512x512)
â””â”€â”€ icons/          # Linuxå¤šå°ºå¯¸å›¾æ ‡ç›®å½•
    â”œâ”€â”€ 16x16.png
    â”œâ”€â”€ 32x32.png
    â”œâ”€â”€ 48x48.png
    â”œâ”€â”€ 64x64.png
    â”œâ”€â”€ 128x128.png
    â”œâ”€â”€ 256x256.png
    â””â”€â”€ 512x512.png
```

**å›¾æ ‡ç”Ÿæˆå·¥å…·**ï¼š
- åœ¨çº¿å·¥å…·: https://www.electron.build/icons
-åœ¨çº¿å·¥å…·: https://cloudconvert.com/png-to-ico

### 2. æ›´æ–°package.json

ä¿®æ”¹ä»¥ä¸‹ä¿¡æ¯ï¼š

```json
{
  "name": "ä½ çš„é¡¹ç›®å",
  "version": "ç‰ˆæœ¬å·",
  "author": "ä½ çš„åå­—",
  "repository": {
    "url": "ä½ çš„GitHubä»“åº“åœ°å€"
  }
}
```

### 3. æ›´æ–°ç‰ˆæœ¬å·

**è‡ªåŠ¨æ›´æ–°**:
```bash
npm version patch  # 2.0.0 -> 2.0.1
npm version minor  # 2.0.0 -> 2.1.0
npm version major  # 2.0.0 -> 3.0.0
```

---

## ğŸ”§ æ„å»ºé…ç½®è¯´æ˜

### Windowsé…ç½®

```json
"win": {
  "target": ["nsis", "portable"],
  "icon": "build/icon.ico"
}
```

**è¾“å‡ºæ–‡ä»¶**:
- `ç‰©æµè§†é¢‘ç®¡ç†-2.0.0-win-x64.exe` - å®‰è£…ç‰ˆ
- `ç‰©æµè§†é¢‘ç®¡ç†-2.0.0-win-x64-portable.exe` - ä¾¿æºç‰ˆ

### macOSé…ç½®

```json
"mac": {
  "target": ["dmg", "zip"],
  "icon": "build/icon.icns",
  "category": "public.app-category.business"
}
```

**è¾“å‡ºæ–‡ä»¶**:
- `ç‰©æµè§†é¢‘ç®¡ç†-2.0.0-mac-x64.dmg` - Intel Mac
- `ç‰©æµè§†é¢‘ç®¡ç†-2.0.0-mac-arm64.dmg` - Apple Silicon Mac
- å¯¹åº”çš„ .zip æ–‡ä»¶

### Linuxé…ç½®

```json
"linux": {
  "target": ["AppImage", "deb", "rpm"],
  "icon": "build/icons",
  "category": "Office"
}
```

**è¾“å‡ºæ–‡ä»¶**:
- `ç‰©æµè§†é¢‘ç®¡ç†-2.0.0-linux-x64.AppImage` - é€šç”¨æ ¼å¼
- `ç‰©æµè§†é¢‘ç®¡ç†-2.0.0-linux-amd64.deb` - Debian/Ubuntu
- `ç‰©æµè§†é¢‘ç®¡ç†-2.0.0-linux-x86_64.rpm` - RedHat/CentOS

---

## ğŸ“¦ æœ¬åœ°æµ‹è¯•æ‰“åŒ…

### å®‰è£…ä¾èµ–

```bash
npm install
```

### æ„å»ºç‰¹å®šå¹³å°

```bash
# Windows
npm run build:win

# macOS
npm run build:mac

# Linux
npm run build:linux

# æ‰€æœ‰å¹³å°ï¼ˆéœ€è¦åœ¨å¯¹åº”ç³»ç»Ÿä¸Šè¿è¡Œï¼‰
npm run build:all

# ä»…æ‰“åŒ…ä¸å‹ç¼©ï¼ˆå¿«é€Ÿæµ‹è¯•ï¼‰
npm run pack
```

### æµ‹è¯•è¿è¡Œ

```bash
# å¯åŠ¨Electronå¼€å‘ç‰ˆ
npm start
```

---

## ğŸŒ GitHub Actionsé…ç½®

### å·¥ä½œæµæ–‡ä»¶

`.github/workflows/build.yml` å·²é…ç½®å¥½ï¼ŒåŒ…å«ï¼š

1. **ä¸‰ä¸ªæ„å»ºä»»åŠ¡** (å¹¶è¡Œè¿è¡Œ)
   - `build-windows` - Windowsæ„å»º
   - `build-macos` - macOSæ„å»º
   - `build-linux` - Linuxæ„å»º

2. **Releaseä»»åŠ¡**
   - è‡ªåŠ¨åˆ›å»ºGitHub Release
   - ä¸Šä¼ æ‰€æœ‰å®‰è£…åŒ…
   - ç”ŸæˆReleaseè¯´æ˜

### æ‰€éœ€Secrets

GitHub Actionsä¼šè‡ªåŠ¨ä½¿ç”¨ `GITHUB_TOKEN`ï¼Œæ— éœ€é¢å¤–é…ç½®ã€‚

å¦‚éœ€ä»£ç ç­¾åï¼ˆå¯é€‰ï¼‰ï¼š

- **Windows**: `WINDOWS_CERTIFICATE`
- **macOS**: `APPLE_ID`, `APPLE_ID_PASSWORD`

---

## ğŸ“Š æ„å»ºæ—¶é—´é¢„ä¼°

| å¹³å° | æ„å»ºæ—¶é—´ | æ–‡ä»¶å¤§å° |
|------|---------|---------|
| Windows | ~5-8åˆ†é’Ÿ | ~100-150MB |
| macOS | ~8-12åˆ†é’Ÿ | ~120-180MB |
| Linux | ~5-8åˆ†é’Ÿ | ~100-140MB |

æ€»è®¡: **çº¦20-30åˆ†é’Ÿ**å®Œæˆæ‰€æœ‰å¹³å°æ„å»º

---

## ğŸ¯ å‘å¸ƒæµç¨‹

### å®Œæ•´å‘å¸ƒæ­¥éª¤

1. **æ›´æ–°ç‰ˆæœ¬**
   ```bash
   npm version minor  # æˆ– patch/major
   ```

2. **æ›´æ–°æ—¥å¿—**
   ç¼–è¾‘ `CHANGELOG.md`ï¼Œè®°å½•æœ¬æ¬¡æ›´æ–°å†…å®¹

3. **æäº¤ä»£ç **
   ```bash
   git add .
   git commit -m "chore: release v2.1.0"
   ```

4. **åˆ›å»ºæ ‡ç­¾**
   ```bash
   git tag v2.1.0
   ```

5. **æ¨é€**
   ```bash
   git push origin main
   git push origin v2.1.0
   ```

6. **ç­‰å¾…æ„å»º**
   - è¿›å…¥GitHub ActionsæŸ¥çœ‹è¿›åº¦
   - çº¦20-30åˆ†é’Ÿå®Œæˆ

7. **æ£€æŸ¥Release**
   - æ„å»ºæˆåŠŸåï¼Œè‡ªåŠ¨åˆ›å»ºRelease
   - æ‰€æœ‰å®‰è£…åŒ…ä¼šè‡ªåŠ¨ä¸Šä¼ 
   - å¯ä»¥ç¼–è¾‘Releaseè¯´æ˜

---

## ğŸ” æ•…éšœæ’æŸ¥

### æ„å»ºå¤±è´¥

1. **æ£€æŸ¥æ—¥å¿—**
   - GitHub Actions â†’ ç‚¹å‡»å¤±è´¥çš„Job
   - æŸ¥çœ‹è¯¦ç»†é”™è¯¯ä¿¡æ¯

2. **å¸¸è§é—®é¢˜**

   **Pythonä¾èµ–é”™è¯¯**:
   ```bash
   # ç¡®ä¿requirements-web.txtå®Œæ•´
   pip install -r requirements-web.txt
   ```

   **Nodeæ¨¡å—é”™è¯¯**:
   ```bash
   # æ¸…é™¤ç¼“å­˜é‡æ–°å®‰è£…
   rm -rf node_modules package-lock.json
   npm install
   ```

   **å›¾æ ‡æ–‡ä»¶ç¼ºå¤±**:
   ```bash
   # æ£€æŸ¥buildç›®å½•ä¸‹æ˜¯å¦æœ‰å›¾æ ‡
   ls -la build/
   ```

### æœ¬åœ°æ„å»ºå¤±è´¥

```bash
# 1. æ¸…ç†ç¼“å­˜
npm run clean  # å¦‚æœæœ‰çš„è¯
rm -rf dist

# 2. é‡æ–°å®‰è£…ä¾èµ–
rm -rf node_modules
npm install

# 3. æ£€æŸ¥Pythonç¯å¢ƒ
python --version
pip install -r requirements-web.txt

# 4. é‡æ–°æ„å»º
npm run build:win  # æˆ–å¯¹åº”å¹³å°
```

---

## ğŸ“ æ³¨æ„äº‹é¡¹

### Windowsç­¾åï¼ˆå¯é€‰ï¼‰

ç”Ÿäº§ç¯å¢ƒå»ºè®®è¿›è¡Œä»£ç ç­¾åï¼š

1. è´­ä¹°ä»£ç ç­¾åè¯ä¹¦
2. é…ç½®GitHub Secrets
3. æ›´æ–° `package.json`:

```json
"win": {
  "certificateFile": "cert.pfx",
  "certificatePassword": "${env.WINDOWS_CERT_PASSWORD}"
}
```

### macOSå…¬è¯ï¼ˆå¯é€‰ï¼‰

macOS 10.15+éœ€è¦å…¬è¯ï¼š

```json
"mac": {
  "hardenedRuntime": true,
  "gatekeeperAssess": false
}
```

é…ç½®Apple IDå’Œåº”ç”¨ä¸“ç”¨å¯†ç ã€‚

### æ–‡ä»¶å¤§å°ä¼˜åŒ–

å¦‚æœå®‰è£…åŒ…è¿‡å¤§ï¼š

1. æ£€æŸ¥æ˜¯å¦åŒ…å«ä¸å¿…è¦çš„æ–‡ä»¶
2. ä½¿ç”¨ `.gitignore` å’Œ `files` é…ç½®æ’é™¤
3. å‹ç¼©Pythonåº“ `pip install --no-cache-dir`

---

## ğŸ‰ æˆåŠŸæ¡ˆä¾‹

**æ¨é€æ ‡ç­¾åï¼ŒGitHub Actionsä¼š**:

1. âœ… è‡ªåŠ¨æ£€æµ‹åˆ°væ ‡ç­¾
2. âœ… è§¦å‘ä¸‰ä¸ªæ„å»ºä»»åŠ¡
3. âœ… å¹¶è¡Œæ„å»ºWindows/Mac/Linux
4. âœ… ç”Ÿæˆæ‰€æœ‰å®‰è£…åŒ…
5. âœ… åˆ›å»ºGitHub Release
6. âœ… ä¸Šä¼ æ‰€æœ‰æ–‡ä»¶
7. âœ… å‘é€å®Œæˆé€šçŸ¥

**ç”¨æˆ·ä¸‹è½½**ï¼š

- è¿›å…¥GitHub Releaseé¡µé¢
- é€‰æ‹©å¯¹åº”ç³»ç»Ÿçš„å®‰è£…åŒ…
- ä¸‹è½½å³å¯ä½¿ç”¨

---

## ğŸ“¦ åˆ†å‘å®‰è£…åŒ…

### GitHub Release (æ¨è)

ä¼˜ç‚¹:
- âœ… å…è´¹æ‰˜ç®¡
- âœ… è‡ªåŠ¨åŒ–å‘å¸ƒ
- âœ… CDNåŠ é€Ÿ

### å…¶ä»–æ–¹å¼

- è“å¥äº‘ã€é˜¿é‡Œäº‘OSSç­‰

---

## ğŸ”„ æŒç»­é›†æˆ

**å»ºè®®é…ç½®**ï¼š

1. **ä¸»åˆ†æ”¯ä¿æŠ¤**
   - è¦æ±‚Pull Requestå®¡æ ¸
   - è¦æ±‚CIé€šè¿‡

2. **è‡ªåŠ¨åŒ–æµ‹è¯•**
   - æ·»åŠ å•å…ƒæµ‹è¯•
   - CIä¸­è¿è¡Œæµ‹è¯•

3. **ç‰ˆæœ¬ç®¡ç†**
   - éµå¾ªè¯­ä¹‰åŒ–ç‰ˆæœ¬
   - ç»´æŠ¤CHANGELOG

---

## ğŸ“š å‚è€ƒèµ„æº

- [Electron Builderæ–‡æ¡£](https://www.electron.build/)
- [GitHub Actionsæ–‡æ¡£](https://docs.github.com/actions)
- [Electronæ–‡æ¡£](https://www.electronjs.org/)

---

**å‡†å¤‡å¥½äº†å—ï¼Ÿç°åœ¨å°±æ¨é€ä»£ç ï¼Œè®©GitHub Actionsè‡ªåŠ¨æ„å»ºä½ çš„åº”ç”¨ï¼** ğŸš€

---

**æ›´æ–°æ—¶é—´**: 2026-01-09  
**é…ç½®ç‰ˆæœ¬**: v1.0  
**æ”¯æŒå¹³å°**: Windows 10+, macOS 10.13+, Ubuntu 18.04+
